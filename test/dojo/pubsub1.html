<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Dojo pubsub test</title>

	<script src="../util/doh/runner.js"></script>
	<script src="../test-config.js"></script>

	<script type="text/javascript">
		require(['wire!test/dojo/pubsub1'], function(context) {
			doh.register('pubsub1', [
				function(doh) {
					//Checking first pub-sub connection
					context.thing1.doSomething("Hello there!");
					console.log(context);
					doh.assertTrue(context.thing1.sentSomething);
					doh.assertTrue(context.thing2.respondedToSomething);
				},
				
				function(doh) {
					//Checking second pub-sub connection
					context.thing1.doSomethingElse("Hello there again!");
					console.log(context);
					doh.assertTrue(context.thing1.sentSomethingElse);
					doh.assertTrue(context.thing2.respondedToSomethingElse);
				}
			]);
			
			doh.run();
		});
	</script>
</head>
<body>

</body>
</html>